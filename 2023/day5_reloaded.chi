import aoc/lib { load }

val input = load("test5.txt")
val blocks = input.split("\n\n").map(readBlock)

fn stoi(s:string): int { s as int }
fn readBlock(b: string): array[array[int]] {
    val lines = b.split("\n")
    val result = array(lines.size()-1, arrayOf[int]())
    var i = 1 // skip header
    while (i < lines.size()) {
        result[i-1] = (lines[i]).split(" ").map(stoi)
        i += 1
    }
    result
}

println(blocks)